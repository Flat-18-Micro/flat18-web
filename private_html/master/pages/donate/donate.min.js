function makeStripeInvoice(){document.getElementById("jsInvoiceWorkspacePre").style.display="none",document.getElementById("statusButton").style.display="block",wkCur_=wkCur_||"USD";var e,t=val_&&100*val_>=100?parseFloat(100*val_):100;if(!document.getElementById("stripe_0")){var n=document.createElement("script");n.id="stripe_0",n.src="https://js.stripe.com/v3/stripe.js",document.head.appendChild(n)}var o=new XMLHttpRequest;o.open("POST","https://api.flat18.co.uk/payments/receive-stripe-payment.php"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){200===o.status&&o.responseText.length<1?console.log("error: "+o.responseText):200!==o.status?console.log("failed: "+o.status):e=JSON.parse(o.responseText).id;try{var t=Stripe("pk_live_co9p2inylaoTVrbvPoRq9F4i002DbGgUOK");t.redirectToCheckout({sessionId:e}).then(function(e){})}catch(e){alert("Sorry. Let's start over. Please refresh this page."),window.location="https://flat18.co.uk/donate"}},o.send(encodeURI("v="+t+"&c="+wkCur_))}function genInvoice_(e){if(document.getElementById("jsInvoiceWorkspacePre").style.display="none",document.getElementById("statusButton").style.display="block",wkCur_=wkCur_||"EUR",!ivFr_){var t=val_||1,n=window.d_typ?window.d_typ:"donation";n+="<?php $origin_. '|' .$origin; ?>";var o=window.psSes?window.psSes:"N/A",r="ttd"!==wkCur_?wkCur_:"usd",i="ttd"!==wkCur_?t:t/6.8;(ivFr_=document.createElement("iframe")).style.border="none",ivFr_.setAttribute("onLoad","window.informOfProgress(event, this)"),ivFr_.setAttribute("srcdoc",'<!doctype html><html><body><form method="GET"  action="https://'+storeURL+'" style="width:0px;height:0px"><input type="hidden" name="store_id" value="'+storeId+'" /><input type="hidden" name="price" value="'+i+'" /><input type="hidden" name="browserRedirect" value="https://flat18.co.uk/thanks_for_your_support" /><input type="hidden" name="currency" value="'+r+'" /><input type="hidden" name="defaultLanguage" value="en" /><input type="hidden" name="orderId" value="'+n+" | "+o+'" /><input type="image" src="" name="submit"></form></body></html>'),ivFr_.style.height="0px",ivFr_.style.width="0px",ivFr_.style.visibility="hidden",document.getElementById("jsInvoiceWorkspace").appendChild(ivFr_)}watchFrameChange("btcpay")}function watchFrameChange(e,t){var n="btcpay"===e?1:0,o="btcpay"===e?2:1;frWtr_=setInterval(function(){var e=document.getElementById("jsInvoiceWorkspace").querySelector("iframe");ifSD_==o&&(clearInterval(frWtr_),setTimeout(function(){var n=t||720;n=n>=.8*screen.height?.8*screen.height:n,document.getElementById("jsInvoiceWorkspace").style.display="block",document.getElementById("statusButton").style.display="none",e.style.height=n+"px",document.getElementById("jsInvoiceWorkspace").style.height=n+"px",e.style.width="100%",e.style.visibility="visible"},300)),ifSD_==n&&(ckWr_||(ivFr_Doc=e.contentDocument).querySelector("form")&&(ivFr_Doc.querySelector("form").submit(),ckWr_=1))},500)}function startDonation(){document.getElementById("valueSelector").querySelector("input").value=20,document.getElementById("valueSelector").querySelector(".currency_").selectedIndex=0,val_=document.getElementById("valueSelector").querySelector("input").value,wkCur_=document.getElementById("valueSelector").querySelector(".currency_").value,document.getElementById("donationModuleMaster").style.display="grid"}function cancelDonation(e){document.getElementById("donationModuleMaster").style.display="none",document.getElementById("statusButton").style.display="none",document.getElementById("jsInvoiceWorkspacePre").style.display="block",ivFr_=void 0,ckWr_=void 0,document.getElementById("jsInvoiceWorkspace").style.display="none",document.getElementById("jsInvoiceWorkspace").innerHTML="",ifSD_=0;window.location.href.replace("/donate","")}var wkCur_,ivFr_,frWtr_,ckWr_,ivFr_Doc,val_,ifSD_,storeId="I1wxWgfpeUCfsIKSx9sqvLvdGXCKUqTKGt8EXDUkdZbsgouxUInNLrxQEyK1b3R6P0cAGhT6YFjNvd1V3RMTe6RwB6SDOay1eOdgDgLVSUXljlsI83QNOcZJDRdbnqnFnLhrwL87exLP9ymIgP0HMfeT59OiVApX4BROH4xV1G61KhkViIFXzrbfTPM73YObf6kUQODIyzqod778Ya62YYZ6elWIu1lksZsdggkcRneN5VqR4dHsClu75b3hHKXoPWzTHPgKbdf1YqdvlCgio4iG6lwZ9zDB2cCf4bAVFP3BRN7hRjaoDkLbAWg37iNYxN4rjaWpCp0zDPDHJUWGTY7l49hdU7YOoS2IuvFzRkAyti2uE8eurgUU2XRIV4Hb9SfA4AirZT2PMOWbxhzftomYYbpZgnMHagkHsAX80z70lwosOoufnjmNvErZNvTwP6buMVXcHI6FCv1ZOX4LqaM4GpLwMXhfjpFMqWZiBzxmWpZL574n3DEFVNgELd9z",storeURL="money.flat18.co.uk/api/v1/invoices/";ifSD_=0,window.informOfProgress=function(e,t){ifSD_++;try{"about:srcdoc"===t.contentWindow.location.href&&ifSD_>=3&&(window.location="/")}catch(e){console.log(e)}ifSD_>=3&&cancelDonation(),console.log("Debug: frame stage: "+ifSD_)};